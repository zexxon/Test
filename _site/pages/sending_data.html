

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Sending in log data &mdash; Graylog 1.2.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Graylog 1.2.0 documentation" href="../index.html"/>
        <link rel="next" title="Graylog Collector" href="collector.html"/>
        <link rel="prev" title="Configuring and tuning Elasticsearch" href="configuring_es.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Graylog
          

          
          </a>

          
            
            
              <div class="version">
                1.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="architecture.html">Architectural considerations</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installing Graylog</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuring_es.html">Configuring and tuning Elasticsearch</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Sending in log data</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#what-are-graylog-message-inputs">What are Graylog message inputs?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#content-packs">Content packs</a></li>
<li class="toctree-l2"><a class="reference internal" href="#syslog">Syslog</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#sending-syslog-from-linux-hosts">Sending syslog from Linux hosts</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#rsyslog">rsyslog</a></li>
<li class="toctree-l4"><a class="reference internal" href="#syslog-ng">syslog-ng</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#sending-syslog-from-macos-x-hosts">Sending syslog from MacOS X hosts</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#gelf-sending-from-applications">GELF / Sending from applications</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#gelf-via-http">GELF via HTTP</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#microsoft-windows">Microsoft Windows</a></li>
<li class="toctree-l2"><a class="reference internal" href="#heroku">Heroku</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#configuring-graylog-to-receive-heroku-log-messages">Configuring Graylog to receive Heroku log messages</a></li>
<li class="toctree-l3"><a class="reference internal" href="#configuring-heroku-to-send-data-to-your-graylog-setup">Configuring Heroku to send data to your Graylog setup</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#ruby-on-rails">Ruby on Rails</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#log-all-requests-and-logger-calls-into-graylog">Log all requests and logger calls into Graylog</a></li>
<li class="toctree-l3"><a class="reference internal" href="#log-only-explicit-logger-calls-into-graylog">Log only explicit logger calls into Graylog</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id4">Heroku</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#raw-plaintext-inputs">Raw/Plaintext inputs</a></li>
<li class="toctree-l2"><a class="reference internal" href="#json-path-from-http-api-input">JSON path from HTTP API input</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#example">Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="#jsonpath">JSONPath</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#reading-from-files">Reading from files</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="collector.html">Graylog Collector</a></li>
<li class="toctree-l1"><a class="reference internal" href="queries.html">Searching</a></li>
<li class="toctree-l1"><a class="reference internal" href="streams.html">Streams</a></li>
<li class="toctree-l1"><a class="reference internal" href="dashboards.html">Dashboards</a></li>
<li class="toctree-l1"><a class="reference internal" href="extractors.html">Extractors</a></li>
<li class="toctree-l1"><a class="reference internal" href="drools.html">Message rewriting with Drools</a></li>
<li class="toctree-l1"><a class="reference internal" href="blacklisting.html">Blacklisting</a></li>
<li class="toctree-l1"><a class="reference internal" href="load_balancers.html">Load balancer integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="index_model.html">The Graylog index model explained</a></li>
<li class="toctree-l1"><a class="reference internal" href="indexer_failures.html">Indexer failures and dead letters</a></li>
<li class="toctree-l1"><a class="reference internal" href="users_and_roles.html">Users and Roles</a></li>
<li class="toctree-l1"><a class="reference internal" href="plugins.html">Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="external_dashboards.html">External dashboards</a></li>
<li class="toctree-l1"><a class="reference internal" href="marketplace.html">Graylog Marketplace</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">Frequently asked questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="ideas_explained.html">The thinking behind the Graylog architecture and why it matters to you</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Graylog</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
    <li>Sending in log data</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/pages/sending_data.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="sending-in-log-data">
<h1>Sending in log data<a class="headerlink" href="#sending-in-log-data" title="Permalink to this headline">¶</a></h1>
<p>A Graylog setup is pretty worthless without any data in it. This page explains the basic principles of getting your data
into the system and also explains common fallacies.</p>
<div class="section" id="what-are-graylog-message-inputs">
<h2>What are Graylog message inputs?<a class="headerlink" href="#what-are-graylog-message-inputs" title="Permalink to this headline">¶</a></h2>
<p>Message inputs are the Graylog parts responsible for accepting log messages. They are launched from the web interface
(or the REST API) in the <em>System -&gt; Inputs</em> section and are launched and configured without the need to restart any
part of the system.</p>
</div>
<div class="section" id="content-packs">
<span id="id1"></span><h2>Content packs<a class="headerlink" href="#content-packs" title="Permalink to this headline">¶</a></h2>
<p>Content packs are bundles of Graylog input, extractor, stream, dashboard, and output configurations that can provide full support
for a data source. Some content packs are shipped with Graylog by default and some are available from the website. Content packs that
were downloaded from <a class="reference external" href="http://marketplace.graylog.org">here</a> can be imported using the Graylog web interface.</p>
<p>You can load and even create own content packs from the <em>System -&gt; Content Packs</em> section of your Graylog web interface.</p>
</div>
<div class="section" id="syslog">
<h2>Syslog<a class="headerlink" href="#syslog" title="Permalink to this headline">¶</a></h2>
<p>Graylog is able to accept and parse <a class="reference external" href="http://www.ietf.org/rfc/rfc5424.txt">RFC 5424</a> and
<a class="reference external" href="http://www.ietf.org/rfc/rfc3164.txt">RFC 3164</a>  compliant syslog messages and supports TCP transport with both
the octet counting or termination character methods. UDP is also supported and the recommended way to send log messages
in most architectures.</p>
<p><strong>Many devices, especially routers and firewalls, do not send RFC compliant syslog messages.</strong> This might result
in wrong or completely failing parsing. In that case you might have to go with a combination of <em>raw/plaintext</em> message inputs that
do not attempt to do any parsing and <a class="reference internal" href="extractors.html"><em>Extractors</em></a>.</p>
<p>Rule of thumb is that messages forwarded by <code class="docutils literal"><span class="pre">rsyslog</span></code> or <code class="docutils literal"><span class="pre">syslog-ng</span></code> are usually parsed flawlessly.</p>
<div class="section" id="sending-syslog-from-linux-hosts">
<h3>Sending syslog from Linux hosts<a class="headerlink" href="#sending-syslog-from-linux-hosts" title="Permalink to this headline">¶</a></h3>
<div class="section" id="rsyslog">
<h4>rsyslog<a class="headerlink" href="#rsyslog" title="Permalink to this headline">¶</a></h4>
<p>Forwarding syslog messages with rsyslog is easy. The only important thing to get the most out of your logs is following
<a class="reference external" href="http://www.ietf.org/rfc/rfc5424.txt">RFC 5424</a>. The following examples configures your <code class="docutils literal"><span class="pre">rsyslog</span></code> daemon to send
RFC 5424 date to Graylog syslog inputs:</p>
<p>UDP:</p>
<div class="highlight-python"><div class="highlight"><pre>$template GRAYLOGRFC5424,&quot;&lt;%PRI%&gt;%PROTOCOL-VERSION% %TIMESTAMP:::date-rfc3339% %HOSTNAME% %APP-NAME% %PROCID% %MSGID% %STRUCTURED-DATA% %msg%\n&quot;
*.* @graylog.example.org:514;GRAYLOGRFC5424
</pre></div>
</div>
<p>TCP:</p>
<div class="highlight-python"><div class="highlight"><pre>$template GRAYLOGRFC5424,&quot;&lt;%PRI%&gt;%PROTOCOL-VERSION% %TIMESTAMP:::date-rfc3339% %HOSTNAME% %APP-NAME% %PROCID% %MSGID% %STRUCTURED-DATA% %msg%\n&quot;
*.* @@graylog.example.org:514;GRAYLOGRFC5424
</pre></div>
</div>
<p>(The difference between UDP and TCP is using <code class="docutils literal"><span class="pre">&#64;</span></code> instead of <code class="docutils literal"><span class="pre">&#64;&#64;</span></code> as target descriptor.)</p>
<p>Alternatively, the rsyslog built-in template <a class="reference external" href="http://www.rsyslog.com/doc/v5-stable/configuration/templates.html#string-based-templates">RSYSLOG_SyslogProtocol23Format</a> sends log messages in the same format as above. This exists in rsyslog versions of at least 5.10 or later.</p>
<p>The UDP examples above becomes:</p>
<div class="highlight-python"><div class="highlight"><pre>*.* @graylog.example.org:514;RSYSLOG_SyslogProtocol23Format
</pre></div>
</div>
</div>
<div class="section" id="syslog-ng">
<h4>syslog-ng<a class="headerlink" href="#syslog-ng" title="Permalink to this headline">¶</a></h4>
<p>Configuring syslog-ng to send syslog to Graylog is equally simple. Use the <code class="docutils literal"><span class="pre">syslog</span></code> function to send
<a class="reference external" href="http://www.ietf.org/rfc/rfc5424.txt">RFC 5424</a> formatted syslog messages via TCP to the remote Graylog host:</p>
<div class="highlight-python"><div class="highlight"><pre># Define TCP syslog destination.
destination d_net {
    syslog(&quot;graylog.example.org&quot; port(514));
};
# Tell syslog-ng to send data from source s_src to the newly defined syslog destination.
log {
    source(s_src); # Defined in the default syslog-ng configuration.
    destination(d_net);
};
</pre></div>
</div>
</div>
</div>
<div class="section" id="sending-syslog-from-macos-x-hosts">
<h3>Sending syslog from MacOS X hosts<a class="headerlink" href="#sending-syslog-from-macos-x-hosts" title="Permalink to this headline">¶</a></h3>
<p>Sending log messages from MacOS X syslog daemons is easy. Just define a <code class="docutils literal"><span class="pre">graylog-server</span></code> instance as UDP log target by
adding this line in your <code class="docutils literal"><span class="pre">/etc/syslog.conf</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre>*.* @graylog.example.org:514
</pre></div>
</div>
<p>Now restart <code class="docutils literal"><span class="pre">syslogd</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre>$ sudo launchctl unload /System/Library/LaunchDaemons/com.apple.syslogd.plist
$ sudo launchctl load /System/Library/LaunchDaemons/com.apple.syslogd.plist
</pre></div>
</div>
<p><strong>Important:</strong> If <code class="docutils literal"><span class="pre">syslogd</span></code> was running as another user you might end up with multiple <code class="docutils literal"><span class="pre">syslogd</span></code> instances and strange
behaviour of the whole system. Please check that only one <code class="docutils literal"><span class="pre">syslogd</span></code> process is running:</p>
<div class="highlight-python"><div class="highlight"><pre>$ ps aux | grep syslog
lennart         58775   0.0  0.0  2432768    592 s004  S+    6:10PM   0:00.00 grep syslog
root            58759   0.0  0.0  2478772   1020   ??  Ss    6:09PM   0:00.01 /usr/sbin/syslogd
</pre></div>
</div>
<p>That&#8217;s it! Your MacOS X syslog messages should now appear in your Graylog system.</p>
</div>
</div>
<div class="section" id="gelf-sending-from-applications">
<h2>GELF / Sending from applications<a class="headerlink" href="#gelf-sending-from-applications" title="Permalink to this headline">¶</a></h2>
<p>The Graylog Extended Log Format (GELF) is a log format that avoids the shortcomings of classic plain syslog and is perfect
to logging from your application layer. It comes with optional compression, chunking and most importantly a clearly defined
structure. There are <a class="reference external" href="http://marketplace.graylog.org">dozens of GELF libraries</a> for many frameworks and
programming languages to get you started.</p>
<p>Read more about GELF <a class="reference external" href="https://www.graylog.org/resources/gelf/">on graylog.org</a>.</p>
<div class="section" id="gelf-via-http">
<h3>GELF via HTTP<a class="headerlink" href="#gelf-via-http" title="Permalink to this headline">¶</a></h3>
<p>You can send in all GELF types via HTTP, including uncompressed GELF that is just a plain JSON string.</p>
<p>After launching a GELF HTTP input you can use the following endpoints to send messages:</p>
<div class="highlight-python"><div class="highlight"><pre>http://graylog.example.org:[port]/gelf (POST)
</pre></div>
</div>
<p>Try sending an example message using curl:</p>
<div class="highlight-python"><div class="highlight"><pre>curl -XPOST http://graylog.example.org:12202/gelf -p0 -d &#39;{&quot;short_message&quot;:&quot;Hello there&quot;, &quot;host&quot;:&quot;example.org&quot;, &quot;facility&quot;:&quot;test&quot;, &quot;_foo&quot;:&quot;bar&quot;}&#39;
</pre></div>
</div>
<p>Both keep-alive and compression are supported via the common HTTP headers. The server will return a <code class="docutils literal"><span class="pre">202</span> <span class="pre">Accepted</span></code> when the message
was accepted for processing.</p>
</div>
</div>
<div class="section" id="microsoft-windows">
<h2>Microsoft Windows<a class="headerlink" href="#microsoft-windows" title="Permalink to this headline">¶</a></h2>
<p>Our recommended way to forward Windows log data (for example EventLog) to Graylog is to use our own
<a class="reference internal" href="collector.html#graylog-collector"><span>log collector</span></a>. It comes with native support for reading Windows event logs.</p>
</div>
<div class="section" id="heroku">
<h2>Heroku<a class="headerlink" href="#heroku" title="Permalink to this headline">¶</a></h2>
<p>Heroku allows you to forward the logs of your application to a custom syslog server by creating a so called
<a class="reference external" href="https://devcenter.heroku.com/articles/logging#syslog-drains">Syslog drain</a>. The drain sends all logs to the configured
server(s) via TCP. Following example shows you how to configure Graylog to receive the Heroku logs and extract the
different fields into a structured log message.</p>
<div class="section" id="configuring-graylog-to-receive-heroku-log-messages">
<h3>Configuring Graylog to receive Heroku log messages<a class="headerlink" href="#configuring-graylog-to-receive-heroku-log-messages" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference external" href="http://marketplace.graylog.org">Graylog Marketplace</a> contains a
<a class="reference external" href="https://marketplace.graylog.org/addons/e28c42a5-eba1-4302-a7b7-cde6485ab341">content pack for Heroku logs</a>, including extractors to parse
the Heroku log format. You can download and use that <a class="reference internal" href="#content-packs"><span>content pack</span></a> to configure Graylog to be able to receive Heroku logs.</p>
<p>Go to <em>System</em> -&gt; <em>Content packs</em>, and click on <em>Import content pack</em>. Select the content pack downloaded from the Graylog Marketplace,
and click <em>Upload</em></p>
<img alt="../_images/heroku_1.png" src="../_images/heroku_1.png" />
<p>On the same page, select <em>Heroku</em> on the <em>SaaS</em> category on the left column, and click on <em>Apply</em>.</p>
<img alt="../_images/heroku_2.png" src="../_images/heroku_2.png" />
<p>That&#8217;s it! You can verify that there is a new input for Heroku, containing a set of extractors to parse your log messages. Make sure your
firewall setup allows incoming connections on the inputs port!</p>
<img alt="../_images/heroku_3.png" src="../_images/heroku_3.png" />
</div>
<div class="section" id="configuring-heroku-to-send-data-to-your-graylog-setup">
<h3>Configuring Heroku to send data to your Graylog setup<a class="headerlink" href="#configuring-heroku-to-send-data-to-your-graylog-setup" title="Permalink to this headline">¶</a></h3>
<p>Heroku has a detailed <a class="reference external" href="https://devcenter.heroku.com/articles/logging#syslog-drains">documentation</a> regarding the Syslog drains feature.
The following example shows everything that is needed to setup the drain for you application:</p>
<div class="highlight-python"><div class="highlight"><pre>$ cd path/to/your/heroku/app
$ heroku drains
No drains for this app
$ heroku drains:add syslog://graylog.example.com:5556
Successfully added drain syslog://graylog.example.com:5556
$ heroku drains
syslog://graylog.example.com:5556 (d.8cf52d32-7d79-4653-baad-8cb72bb23ee1)
</pre></div>
</div>
<p>The <a class="reference external" href="https://devcenter.heroku.com/articles/heroku-command">Heroku CLI tool</a> needs to be installed for this to work.</p>
<p>You Heroku application logs should now show up in the search results of your Graylog instance.</p>
</div>
</div>
<div class="section" id="ruby-on-rails">
<h2>Ruby on Rails<a class="headerlink" href="#ruby-on-rails" title="Permalink to this headline">¶</a></h2>
<p>This is easy: You just need to combine a few components.</p>
<div class="section" id="log-all-requests-and-logger-calls-into-graylog">
<h3>Log all requests and logger calls into Graylog<a class="headerlink" href="#log-all-requests-and-logger-calls-into-graylog" title="Permalink to this headline">¶</a></h3>
<p>The recommended way to send structured information (i.e. HTTP return code, action, controller, ... in additional fields) about every request and
explicit <code class="docutils literal"><span class="pre">Rails.logger</span></code> calls is easily accomplished using the <a class="reference external" href="https://rubygems.org/gems/gelf">GELF gem</a> and
<a class="reference external" href="https://github.com/roidrage/lograge">lograge</a>. Lograge builds one combined log entry for every request (instead of several lines like the
standard Rails logger) and has a Graylog output since version 0.2.0.</p>
<p>Start by adding Lograge and the GELF gem to your Gemfile:</p>
<div class="highlight-python"><div class="highlight"><pre>gem &quot;gelf&quot;
gem &quot;lograge&quot;
</pre></div>
</div>
<p>Now configure both in your Rails application. Usually <code class="docutils literal"><span class="pre">config/environments/production.rb</span></code> is a good place for that:</p>
<div class="highlight-python"><div class="highlight"><pre>config.lograge.enabled = true
config.lograge.formatter = Lograge::Formatters::Graylog2.new
config.logger = GELF::Logger.new(&quot;graylog.example.org&quot;, 12201, &quot;WAN&quot;, { :host =&gt; &quot;hostname-of-this-app&quot;, :facility =&gt; &quot;heroku&quot; })
</pre></div>
</div>
<p>This configuration will also send all explicit <code class="docutils literal"><span class="pre">Rails.logger</span></code> calls (e.g. <code class="docutils literal"><span class="pre">Rails.logger.error</span> <span class="pre">&quot;Something</span> <span class="pre">went</span> <span class="pre">wrong&quot;</span></code>) to Graylog.</p>
</div>
<div class="section" id="log-only-explicit-logger-calls-into-graylog">
<h3>Log only explicit logger calls into Graylog<a class="headerlink" href="#log-only-explicit-logger-calls-into-graylog" title="Permalink to this headline">¶</a></h3>
<p>If you don&#8217;t want to log information about every request, but only explicit <code class="docutils literal"><span class="pre">Rails.logger</span></code> calls, it is enough to only configure the Rails logger.</p>
<p>Add the GELF gem to your Gemfile:</p>
<div class="highlight-python"><div class="highlight"><pre>gem &quot;gelf&quot;
</pre></div>
</div>
<p>...and configure it in your Rails application. Usually <code class="docutils literal"><span class="pre">config/environments/production.rb</span></code> is a good place for that:</p>
<div class="highlight-python"><div class="highlight"><pre>config.logger = GELF::Logger.new(&quot;graylog.example.org&quot;, 12201, &quot;WAN&quot;, { :host =&gt; &quot;hostname-of-this-app&quot;, :facility =&gt; &quot;heroku&quot; })
</pre></div>
</div>
</div>
<div class="section" id="id4">
<h3>Heroku<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<p>You need to apply a workaround if you want custom logging on Heroku. The reason for this is that Heroku injects an own logger (<code class="docutils literal"><span class="pre">rails_log_stdout</span></code>),
that overwrites your custom one. The workaround is to add a file that makes Heroku think that the logger is already in your application:</p>
<div class="highlight-python"><div class="highlight"><pre>$ touch vendor/plugins/rails_log_stdout/heroku_fix
</pre></div>
</div>
</div>
</div>
<div class="section" id="raw-plaintext-inputs">
<h2>Raw/Plaintext inputs<a class="headerlink" href="#raw-plaintext-inputs" title="Permalink to this headline">¶</a></h2>
<p>The built-in <em>raw/plaintext</em> inputs allow you to parse any text that you can send via TCP or UDP. No parsing is applied at
all by default until you build your own parser using custom <a class="reference internal" href="extractors.html"><em>Extractors</em></a>. This is a good way to support any text-based
logging format.</p>
<p>You can also write <a class="reference internal" href="plugins.html"><em>Plugins</em></a> if you need extreme flexibility.</p>
</div>
<div class="section" id="json-path-from-http-api-input">
<h2>JSON path from HTTP API input<a class="headerlink" href="#json-path-from-http-api-input" title="Permalink to this headline">¶</a></h2>
<p>The JSON path from HTTP API input is reading any JSON response of a REST resource and stores a field value of it as a Graylog message.</p>
<div class="section" id="example">
<h3>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h3>
<p>Let&#8217;s try to read the download count of a release package stored on GitHub for analysis in Graylog. The call looks like this:</p>
<div class="highlight-python"><div class="highlight"><pre>$ curl -XGET https://api.github.com/repos/YourAccount/YourRepo/releases/assets/12345
{
  &quot;url&quot;: &quot;https://api.github.com/repos/YourAccount/YourRepo/releases/assets/12345&quot;,
  &quot;id&quot;: 12345,
  &quot;name&quot;: &quot;somerelease.tgz&quot;,
  &quot;label&quot;: &quot;somerelease.tgz&quot;,
  &quot;content_type&quot;: &quot;application/octet-stream&quot;,
  &quot;state&quot;: &quot;uploaded&quot;,
  &quot;size&quot;: 38179285,
  &quot;download_count&quot;: 9937,
  &quot;created_at&quot;: &quot;2013-09-30T20:05:01Z&quot;,
  &quot;updated_at&quot;: &quot;2013-09-30T20:05:46Z&quot;
}
</pre></div>
</div>
<p>The attribute we want to extract is <code class="docutils literal"><span class="pre">download_count</span></code> so we set the JSON path to <code class="docutils literal"><span class="pre">$.download_count</span></code>.</p>
<p>This will result in a message in Graylog looking like this:</p>
<img alt="../_images/jsonpath_1.png" src="../_images/jsonpath_1.png" />
<p>You can use Graylog to analyse your download counts now.</p>
</div>
<div class="section" id="jsonpath">
<h3>JSONPath<a class="headerlink" href="#jsonpath" title="Permalink to this headline">¶</a></h3>
<p>JSONPath can do much more than just selecting a simple known field value. You can for example do this to select the first <code class="docutils literal"><span class="pre">download_count</span></code>
from a list of releases where the field <code class="docutils literal"><span class="pre">state</span></code> has the value <code class="docutils literal"><span class="pre">uploaded</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre>$.releases[?(@.state == &#39;uploaded&#39;)][0].download_count
</pre></div>
</div>
<p>...or only the first download count at all:</p>
<div class="highlight-python"><div class="highlight"><pre>$.releases[0].download_count
</pre></div>
</div>
<p>You can <a class="reference external" href="http://goessner.net/articles/JsonPath/">learn more about JSONPath here</a>.</p>
</div>
</div>
<div class="section" id="reading-from-files">
<h2>Reading from files<a class="headerlink" href="#reading-from-files" title="Permalink to this headline">¶</a></h2>
<p>Graylog is currently not providing an out-of-the-box way to read log messages from files. We do however recommend two
fantastic tools to do that job for you. Both come with native Graylog (GELF) outputs:</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference external" href="http://www.fluentd.org/guides/recipes/graylog2">fluentd</a></li>
<li><a class="reference external" href="http://logstash.net/docs/1.4.2/outputs/gelf">logstash</a></li>
</ul>
</div></blockquote>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="collector.html" class="btn btn-neutral float-right" title="Graylog Collector" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="configuring_es.html" class="btn btn-neutral" title="Configuring and tuning Elasticsearch" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015 Graylog, Inc..

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.2.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>